<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%= listing.title %> | Product Details</title>
    <link rel="stylesheet" href="/your-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #333;
        }
        .product-container {
            max-width: 1100px;
            margin: 30px auto;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            padding: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            animation: fadeIn 0.5s ease-in-out;
        }
        .image-slider {
            flex: 1;
            min-width: 300px;
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            height: 400px;
        }
        #sliderImage {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
            transition: transform 0.5s ease;
        }
        .slider-buttons {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 15px;
            box-sizing: border-box;
            transform: translateY(-50%);
        }
        .slider-buttons button {
            background: rgba(255,255,255,0.8);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .slider-buttons button:hover {
            background: rgba(255,255,255,1);
            transform: scale(1.1);
        }
        .slider-indicators {
            position: absolute;
            bottom: 15px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        .indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s;
        }
        .indicator.active {
            background: white;
            transform: scale(1.2);
        }
        .product-details {
            flex: 1;
            min-width: 300px;
        }
        .product-details h1 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 28px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        .price {
            font-size: 28px;
            font-weight: 700;
            color: #27ae60;
            margin: 15px 0;
            display: inline-block;
            background: rgba(39, 174, 96, 0.1);
            padding: 5px 15px;
            border-radius: 4px;
        }
        .sold-badge {
            display: inline-block;
            background: #e74c3c;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            font-weight: bold;
            margin: 10px 0;
            animation: pulse 2s infinite;
        }
        .description-card, .details-card, .similar-products {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 4px solid #3498db;
        }
        .details-card h3, .description-card h3, .similar-products h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .details-card h3 i, .description-card h3 i, .similar-products h3 i {
            color: #3498db;
        }
        .detail-row {
            margin: 10px 0;
            display: flex;
            align-items: center;
            font-size: 15px;
        }
        .detail-row strong {
            min-width: 120px;
            display: inline-block;
            color: #555;
        }
        .detail-row i {
            margin-right: 5px;
            color: #3498db;
        }
        .timestamp {
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 10px;
            font-style: italic;
        }
        .seller-email {
            color: #7f8c8d;
            font-size: 14px;
        }
        .action-links {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        .action-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 20px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.3s;
            text-align: center;
            min-width: 150px;
        }
        .primary-link {
            background: #27ae60;
            color: white;
        }
        .primary-link:hover {
            background: #219653;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }
        .secondary-link {
            background: #e74c3c;
            color: white;
        }
        .secondary-link:hover {
            background: #c0392b;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }
        .tertiary-link {
            background: #f8f9fa;
            color: #333;
            border: 1px solid #ddd;
        }
        .tertiary-link:hover {
            background: #e9ecef;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .disabled-link {
            background: #95a5a6;
            color: white;
            cursor: not-allowed;
            pointer-events: none;
        }
        .secondary-link-active {
            background: #7f8c8d;
        }
        .view-more-link {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            color: #3498db;
            text-decoration: none;
            margin-top: 10px;
            font-weight: 500;
            transition: all 0.3s;
        }
        .view-more-link:hover {
            color: #2980b9;
            gap: 8px;
        }
        @media (max-width: 768px) {
            .product-container {
                flex-direction: column;
                padding: 20px;
            }
            .image-slider {
                height: 300px;
            }
            .action-links {
                flex-direction: column;
            }
            .action-link {
                width: 100%;
            }
        }
    </style>
</head>
<body>

<%- include('partials/header') %>

<div class="container">
    <div class="product-container">
        <!-- IMAGE SLIDER -->
        <div class="image-slider">
            <% if (listing.images && listing.images.length > 0) { %>
                <img id="sliderImage" src="<%= listing.images[0] %>" alt="Product Image">
                <div class="slider-buttons">
                    <button onclick="prevImage()"><i class="fas fa-chevron-left"></i></button>
                    <button onclick="nextImage()"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="slider-indicators">
                    <% for(let i = 0; i < listing.images.length; i++) { %>
                        <span class="indicator <%= i === 0 ? 'active' : '' %>" onclick="showImage(<%= i %>)"></span>
                    <% } %>
                </div>
            <% } else { %>
                <img src="https://via.placeholder.com/400x300?text=No+Image" alt="No Image Available">
            <% } %>
        </div>

        <!-- DETAILS -->
        <div class="product-details">
            <h1><%= listing.title %></h1>
            <div class="price">â‚¹<%= listing.price %></div>
            
            <% if (listing.isSold) { %>
                <div class="sold-badge"><i class="fas fa-tag"></i> SOLD</div>
            <% } %>
            
            <div class="description-card">
                <h3><i class="fas fa-align-left"></i> Description</h3>
                <p><%= listing.description %></p>
            </div>

            <div class="details-card">
                <h3><i class="fas fa-info-circle"></i> Details</h3>
                <div class="detail-row">
                    <strong><i class="fas fa-tag"></i> Category:</strong> <%= listing.category %>
                </div>
                <div class="detail-row">
                    <strong><i class="fas fa-map-marker-alt"></i> Location:</strong> <%= listing.location %>
                </div>
                <div class="detail-row">
                    <strong><i class="fas fa-user"></i> Posted By:</strong> <%= listing.postedBy?.fullname %> 
                    <span class="seller-email">(<%= listing.postedBy?.email %>)</span>
                </div>

                <div class="timestamp">
                    <i class="far fa-calendar-alt"></i> Posted on: <%= new Date(listing.createdAt).toLocaleDateString() %>
                </div>
            </div>

            <!-- Place Order and Bookmark Links -->
            <div class="action-links">
                <a href="" id="placeOrderBtn" 
                   class="action-link primary-link <%= listing.isSold ? 'disabled-link' : '' %>"
                   onclick="<%= !listing.isSold ? 'event.preventDefault(); placeOrder();' : '' %>">
                    <i class="fas fa-shopping-cart"></i> Place Order
                </a>
                <a href="/bookmarks/add/<%= listing._id %>" id="bookmarkBtn" 
                   class="action-link secondary-link"
                   onclick="event.preventDefault(); bookmarkListing();">
                    <i class="far fa-bookmark"></i> Bookmark
                </a>
                <a href="/" class="action-link tertiary-link">
                    <i class="fas fa-arrow-left"></i> Back to Listings
                </a>
            </div>
            
            <!-- Similar Products -->
            <div class="similar-products">
                <h3><i class="fas fa-th-large"></i> Similar Products</h3>
                <p>Check out other items in this category.</p>
                <a href="/categories/<%= listing.category %>" class="view-more-link">
                    View More <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    const images = <%- JSON.stringify(listing.images || []) %>;
    let currentImageIndex = 0;

    function showImage(index) {
        currentImageIndex = index;
        const sliderImage = document.getElementById('sliderImage');
        if (sliderImage && images.length > 0) {
            sliderImage.style.opacity = '0';
            setTimeout(() => {
                sliderImage.src = images[index];
                sliderImage.style.opacity = '1';
                
                // Update indicators
                document.querySelectorAll('.indicator').forEach((indicator, i) => {
                    if (i === index) {
                        indicator.classList.add('active');
                    } else {
                        indicator.classList.remove('active');
                    }
                });
            }, 200);
        }
    }

    function nextImage() {
        currentImageIndex = (currentImageIndex + 1) % images.length;
        showImage(currentImageIndex);
    }

    function prevImage() {
        currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
        showImage(currentImageIndex);
    }

    function placeOrder() {
        const orderFormModal = document.getElementById('orderFormModal');
        orderFormModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    function bookmarkListing() {
        // Send an API request to bookmark the listing
        fetch(`/api/bookmark/<%= listing._id %>`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ listingId: '<%= listing._id %>' })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const bookmarkBtn = document.getElementById('bookmarkBtn');
                if (bookmarkBtn.innerHTML.includes('Bookmark')) {
                    bookmarkBtn.innerHTML = '<i class="fas fa-bookmark"></i> Bookmarked';
                    bookmarkBtn.classList.add('secondary-link-active');
                } else {
                    bookmarkBtn.innerHTML = '<i class="far fa-bookmark"></i> Bookmark';
                    bookmarkBtn.classList.remove('secondary-link-active');
                }
            } else {
                alert('Failed to bookmark the listing');
            }
        })
        .catch(error => {
            console.error('Error bookmarking the listing:', error);
            alert('Error bookmarking the listing');
        });
    }
    
    // Optional: Auto-play slideshow
    if (images.length > 1) {
        setInterval(nextImage, 5000);
    }
    
    // Add smooth transition for slider image
    const sliderImage = document.getElementById('sliderImage');
    if (sliderImage) {
        sliderImage.style.transition = 'opacity 0.2s ease-in-out';
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        // Close Order Form Modal
        const closeOrderModalBtn = document.getElementById('closeOrderModal');
        if (closeOrderModalBtn) {
            closeOrderModalBtn.addEventListener('click', () => {
                document.getElementById('orderFormModal').classList.remove('active');
                document.body.style.overflow = '';
            });
        }
        
        // Close Success Modal
        const closeSuccessModalBtn = document.getElementById('closeSuccessModal');
        if (closeSuccessModalBtn) {
            closeSuccessModalBtn.addEventListener('click', () => {
                document.getElementById('orderSuccessModal').classList.remove('active');
                document.body.style.overflow = '';
            });
        }
        
        // Close modals if clicked outside
        window.addEventListener('click', (e) => {
            const orderFormModal = document.getElementById('orderFormModal');
            const orderSuccessModal = document.getElementById('orderSuccessModal');
            
            if (e.target === orderFormModal) {
                orderFormModal.classList.remove('active');
                document.body.style.overflow = '';
            }
            
            if (e.target === orderSuccessModal) {
                orderSuccessModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
        
        // Handle form submission
        const orderForm = document.getElementById('orderForm');
        if (orderForm) {
            orderForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Show loading state
                const submitBtn = this.querySelector('.submit-btn');
                const originalBtnText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                submitBtn.disabled = true;
                
                // Gather form data
                const formData = {
                    listingId: document.getElementById('orderListingId').value,
                    name: document.getElementById('name').value,
                    address: document.getElementById('address').value,
                    phone: document.getElementById('phone').value,
                    city: document.getElementById('city').value,
                    pincode: document.getElementById('pincode').value
                };
                
                try {
                    // Send request to the correct API endpoint
                    const response = await fetch('/api/v1/create-order', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(formData)

                    });

                    console.log('Order API request:', formData);
                    console.log('Order API response status:', response)
                    
                    const result = await response.json();
                    console.log('Order API response:', result);
                    
                    // Reset button state
                    submitBtn.innerHTML = originalBtnText;
                    submitBtn.disabled = false;
                    
                    if (response.ok) {
                        // Hide order form and show success modal
                        document.getElementById('orderFormModal').classList.remove('active');
                        
                        // Set order details in success modal
                        const displayOrderId = document.getElementById('displayOrderId');
                        if (displayOrderId) {
                            displayOrderId.textContent = result.message.order._id;
                        }
                        
                        // Set PayPal link
                        const paypalLink = document.getElementById('paypalLink');
                        if (paypalLink) {
                            paypalLink.href = result.message.paypalLink;
                        }
                        
                        // Show success modal
                        const successModal = document.getElementById('orderSuccessModal');
                        if (successModal) {
                            successModal.classList.add('active');
                        }
                        
                        // Optional: Reset form for future use
                        this.reset();
                    } else {
                        // Show error message
                        alert(`Error: ${result.message || 'Something went wrong'}`);
                    }
                } catch (error) {
                    console.error('Error creating order:', error);
                    alert('Unable to process your order. Please try again later.');
                    
                    // Reset button state
                    submitBtn.innerHTML = originalBtnText;
                    submitBtn.disabled = false;
                }
            });
        } else {
            console.error('Order form not found in the DOM');
        }
    });
</script>

<!-- Order Form Modal -->
<div class="modal" id="orderFormModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-shopping-bag"></i> Complete Your Order</h2>
            <button class="close-btn" id="closeOrderModal">&times;</button>
        </div>
        <div class="modal-body">
            <form id="orderForm">
                <input type="hidden" id="orderListingId" name="listingId" value="<%= listing._id %>">
                
                <div class="form-group">
                    <label for="name"><i class="fas fa-user"></i> Full Name</label>
                    <input type="text" id="name" name="name" required placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label for="address"><i class="fas fa-map-marker-alt"></i> Delivery Address</label>
                    <textarea id="address" name="address" required placeholder="Enter your complete address"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="phone"><i class="fas fa-phone"></i> Phone Number</label>
                        <input type="tel" id="phone" name="phone" required placeholder="Enter your phone number" pattern="[0-9]{10}">
                    </div>
                    
                    <div class="form-group">
                        <label for="city"><i class="fas fa-city"></i> City</label>
                        <input type="text" id="city" name="city" required placeholder="Enter your city">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="pincode"><i class="fas fa-map-pin"></i> Pincode</label>
                    <input type="text" id="pincode" name="pincode" required placeholder="Enter your pincode" pattern="[0-9]{6}">
                </div>
                
                <div class="order-summary">
                    <h3><i class="fas fa-receipt"></i> Order Summary</h3>
                    <div class="summary-row">
                        <span>Product:</span>
                        <span><%= listing.title %></span>
                    </div>
                    <div class="summary-row">
                        <span>Price:</span>
                        <span class="price-value">â‚¹<%= listing.price %></span>
                    </div>
                    <div class="summary-row">
                        <span>Delivery:</span>
                        <span>â‚¹40</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span class="price-value">â‚¹<%= parseInt(listing.price) + 40 %></span>
                    </div>
                </div>
                
                <div class="payment-methods">
                    <h3><i class="fas fa-credit-card"></i> Payment Method</h3>
                    <div class="payment-option">
                        <input type="radio" id="paypal" name="paymentMethod" value="paypal" checked>
                        <label for="paypal">
                            <i class="fab fa-paypal"></i> PayPal
                        </label>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn">
                    <i class="fas fa-check-circle"></i> Confirm Order
                </button>
            </form>
        </div>
    </div>
</div>

<!-- Order Success Modal -->
<div class="modal" id="orderSuccessModal">
    <div class="modal-content">
        <div class="modal-header success-header">
            <h2><i class="fas fa-check-circle"></i> Order Placed Successfully!</h2>
            <button class="close-btn" id="closeSuccessModal">&times;</button>
        </div>
        <div class="modal-body text-center">
            <div class="success-animation">
                <i class="fas fa-shopping-cart"></i>
            </div>
            
            <h3>Thank you for your order!</h3>
            <p>Your order has been placed successfully. Please complete the payment to confirm your purchase.</p>
            
            <div class="order-details">
                <div class="detail-row">
                    <strong>Order ID:</strong>
                    <span id="displayOrderId">-</span>
                </div>
                <div class="detail-row">
                    <strong>Payment Status:</strong>
                    <span class="badge pending">Pending</span>
                </div>
            </div>
            
            <a href="#" id="paypalLink" class="paypal-button" target="_blank">
                <i class="fab fa-paypal"></i> Pay with PayPal
            </a>
            
            <p class="order-note">
                <i class="fas fa-info-circle"></i> After completing payment, you'll receive a confirmation email with your order details.
            </p>
        </div>
    </div>
</div>

<style>
    /* Order Form Modal Styles */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.7);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        opacity: 0;
        transition: opacity 0.3s;
    }
    
    .modal.active {
        display: flex;
        opacity: 1;
    }
    
    .modal-content {
        background: white;
        width: 100%;
        max-width: 600px;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 0 30px rgba(0,0,0,0.3);
        animation: slideIn 0.3s forwards;
        max-height: 90vh;
        overflow-y: auto;
    }
    
    .modal-header {
        background: #2c3e50;
        color: white;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .modal-header h2 {
        margin: 0;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .close-btn {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0 5px;
        min-width: auto;
    }
    
    .close-btn:hover {
        color: #e74c3c;
    }
    
    .modal-body {
        padding: 20px;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-row {
        display: flex;
        gap: 15px;
    }
    
    .form-row .form-group {
        flex: 1;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #2c3e50;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .form-group label i {
        color: #3498db;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 1rem;
        transition: all 0.3s;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
    }
    
    .form-group textarea {
        min-height: 80px;
        resize: vertical;
    }
    
    .order-summary {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        margin: 20px 0;
        border-left: 4px solid #3498db;
    }
    
    .order-summary h3 {
        margin-top: 0;
        margin-bottom: 15px;
        color: #2c3e50;
        font-size: 18px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .order-summary h3 i {
        color: #3498db;
    }
    
    .summary-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    
    .summary-row.total {
        border-bottom: none;
        font-weight: 700;
        font-size: 1.1rem;
        margin-top: 10px;
        padding-top: 10px;
        border-top: 2px solid #ddd;
    }
    
    .price-value {
        color: #27ae60;
        font-weight: 600;
    }
    
    .payment-methods {
        margin: 20px 0;
    }
    
    .payment-methods h3 {
        margin-top: 0;
        margin-bottom: 15px;
        color: #2c3e50;
        font-size: 18px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .payment-methods h3 i {
        color: #3498db;
    }
    
    .payment-option {
        display: flex;
        align-items: center;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        margin-bottom: 10px;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .payment-option:hover {
        border-color: #3498db;
        background: rgba(52, 152, 219, 0.05);
    }
    
    .payment-option input {
        margin-right: 10px;
    }
    
    .payment-option label {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 500;
        color: #2c3e50;
        cursor: pointer;
    }
    
    .payment-option i {
        font-size: 1.5rem;
        color: #0070ba;
    }
    
    .submit-btn {
        background: #27ae60;
        color: white;
        border: none;
        width: 100%;
        padding: 15px;
        font-size: 1.1rem;
        font-weight: 600;
        border-radius: 6px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
        transition: all 0.3s;
    }
    
    .submit-btn:hover {
        background: #219653;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
    }
    
    /* Success Modal Styles */
    .success-header {
        background: #27ae60;
    }
    
    .text-center {
        text-align: center;
    }
    
    .success-animation {
        font-size: 5rem;
        color: #27ae60;
        margin: 20px 0;
        animation: bounceIn 1s;
    }
    
    .order-details {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        margin: 20px 0;
        border-left: 4px solid #3498db;
    }
    
    .badge {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 0.9rem;
        font-weight: 600;
        color: white;
    }
    
    .badge.pending {
        background: #f39c12;
    }
    
    .paypal-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background: #0070ba;
        color: white;
        text-decoration: none;
        padding: 15px 30px;
        border-radius: 6px;
        font-size: 1.1rem;
        font-weight: 600;
        margin: 20px 0;
        transition: all 0.3s;
        cursor: pointer;
    }
    
    .paypal-button:hover {
        background: #005ea6;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 112, 186, 0.3);
    }
    
    .order-note {
        color: #7f8c8d;
        font-size: 0.9rem;
        margin-top: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }
    
    @keyframes bounceIn {
        0% { transform: scale(0); opacity: 0; }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); opacity: 1; }
    }
    
    @keyframes slideIn {
        from { transform: translateY(50px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    
    @media (max-width: 768px) {
        .form-row {
            flex-direction: column;
            gap: 0;
        }
    }
</style>

<%- include('partials/footer') %>

</body>
</html>